"use strict";(self["webpackChunkopit"]=self["webpackChunkopit"]||[]).push([[261],{4261:function(e,t,s){s.r(t),s.d(t,{default:function(){return u}});var o=function(){var e=this,t=e._self._c;return t("div",{staticClass:"about"},[e.prijavljen?t("div",[t("p",[e._v("Већ сте улоговани, вратите се на почетну страницу кликом на лого сајта")])]):t("div",{staticClass:"nijeUlogovan"},[t("input",{attrs:{type:"Button",value:"Почетна страница"},on:{click:function(t){return e.redirect("home")}}}),t("br"),t("br"),t("br"),t("h1",[e._v("Пријава")]),e._v(" Корисничко име:"),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text"},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}}),t("br"),e._v(" Лозинка:"),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.pass,expression:"pass"}],attrs:{type:"password"},domProps:{value:e.pass},on:{input:function(t){t.target.composing||(e.pass=t.target.value)}}}),t("br"),t("br"),t("input",{attrs:{type:"button",value:"Пријави ме"},on:{click:function(t){return e.login()}}}),t("br"),t("br"),t("p",{staticClass:"linkk",on:{click:function(t){return e.redirect("register")}}},[e._v("Можете такође да се региструјете кликом на ово ")])])])},r=[],a={name:"HelloWorld",props:{msg:String},data(){return{pass:"",userName:""}},mounted(){let e=localStorage.getItem("token");e&&this.$router.push({name:"home"})},methods:{async login(){if(this.pass&&this.userName){let e=await fetch("https://vue-verification.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({korisnickoIme:this.userName,lozinka:this.pass})}).then((e=>{if(400==e.status||500==e.status)throw console.log(e.status),new Error("Pogreska");return e.json()})).then((e=>(alert("Ulogovali ste se"),localStorage.setItem("id",e.id),localStorage.setItem("token",e.token),!0))).catch((e=>(console.log("Greska u unosa podataka "+e),!1)));if(e){await fetch("https://vue-rest.herokuapp.com/admin/korisnik/getUserName",{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*"},credentials:"include",body:JSON.stringify({id:localStorage.getItem("id")})}).then((e=>e.json())).then((e=>{localStorage.setItem("ime",e.id),this.$router.push({name:"home"})})).catch((e=>{console.log(e)}))}}else alert("Niste popunili sva polja")},redirect(e){this.$router.push({name:e})}},computed:{prijavljen(){return this.$store.state.prijavljen}}},n=a,i=s(1001),l=(0,i.Z)(n,o,r,!1,null,"60c49e26",null),u=l.exports}}]);
//# sourceMappingURL=261.1938e35a.js.map